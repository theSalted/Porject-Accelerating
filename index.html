<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>crisp-game-lib</title>
    <meta
      name="viewport"
      content="width=device-width, height=device-height,
    user-scalable=no, initial-scale=1, maximum-scale=1"
    />
    <script src="https://unpkg.com/sounds-some-sounds@1.0.5/build/index.js"></script>
    <script src="https://unpkg.com/gif-capture-canvas@1.1.0/build/index.js"></script>
    <script src="https://unpkg.com/terser@4.6.11/dist/bundle.min.js"></script>
    <script src="https://unpkg.com/pixi.js@5.3.0/dist/pixi.min.js"></script>
    <script src="https://unpkg.com/pixi-filters@3.1.1/dist/pixi-filters.js"></script>
    <script>
      var module = {};
    </script>
    <script src="https://unpkg.com/lodash.clonedeep@4.5.0/index.js"></script>
    <script src="https://abagames.github.io/crisp-game-lib/bundle.js"></script>

<script>
title = "Project Accelerating";

description = ``;

characters = [];

const G = {
  // screen size
  WIDTH: 300,
  HEIGHT: 300,
  
  // default player speed 
  DEFAULTPSPEED: 1,
  STAR_SPEED_MIN: 0.5,
	STAR_SPEED_MAX: 1.0
};

options = {
  viewSize: {x: G.WIDTH, y: G.HEIGHT},
};

// Initi Player

/**
 * @typedef {{
 * pos: Vector,
 * }} Player
 */

/**
 * @type { Player }
 */
let player;

//  Initi Stars
/**
 * @typedef {{
 * pos: Vector,
 * speed: number
 * }} Star
 */

/**
 * @type { Star [] }
 */
 let stars;

// The game loop function
function update() {
    // The init function running at startup
	if (!ticks) {
        // A CrispGameLib function
        // First argument (number): number of times to run the second argument
        // Second argument (function): a function that returns an object. This
        // object is then added to an array. This array will eventually be
        // returned as output of the times() function.
		stars = times(20, () => {
            // Random number generator function
            // rnd( min, max )
            const posX = rnd(0, G.WIDTH);
            const posY = rnd(0, G.HEIGHT);
            // An object of type Star with appropriate properties
            return {
                // Creates a Vector
                pos: vec(posX, posY),
                // More RNG
                speed: rnd(G.STAR_SPEED_MIN, G.STAR_SPEED_MAX)
            };
        });
        player = {
      pos: vec(G.WIDTH * 0.5, G.HEIGHT * 0.8)
    };
    
    //variable init for player
    player.speed = G.DEFAULTPSPEED;
    player.isMovingRight = true;
	}

    // Update for Star
    stars.forEach((s) => {
        // Move the star downwards
        s.pos.y += s.speed;
        // Bring the star back to top once it's past the bottom of the screen
        if (s.pos.y > G.HEIGHT) s.pos.y = 0;

        // Choose a color to draw
        color("light_black");
        // Draw the star as a square of size 1
        box(s.pos, 1);
    });
      // Update for Star
  stars.forEach((s) => {
        // Move the star downwards
        s.pos.y += s.speed;
        // Bring the star back to top once it's past the bottom of the screen
        if (s.pos.y > G.HEIGHT) s.pos.y = 0;

        // Choose a color to draw
        color("light_black");
        // Draw the star as a square of size 1
        box(s.pos, 1);
    });
    
  // player activation
  color("cyan");
  box(player.pos, 10);
  
  // movement code
  if(player.isMovingRight) {
    player.pos.x += player.speed;
  } else {
    player.pos.x -= player.speed;
  }
  
  // when player hit boundaries make it go reverse
  if(player.pos.x >= G.WIDTH * 0.9) {
    player.isMovingRight = false;
  } else if(player.pos.x <= G.WIDTH * 0.1){
    player.isMovingRight = true;
  }
  
  if(input.isPressed) {
    player.speed = 5;
  } else {
    player.speed = G.DEFAULTPSPEED
  }
}

// comment test

addEventListener("load", onLoad);
</script>

  </head>
  <body style="background: #ddd"></body>
</html>
